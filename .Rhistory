setwd("~/Box Sync/PhD Feedbacks/Git Repository/grazing-gradients")
load('maldives_master.csv')
## write to csv
write.csv(maldives, file = 'data/maldives_master.csv')
load('maldives_master.csv')
load('maldives_master.csv')
load("C:\Users\Jan-Claas\Box Sync\PhD Feedbacks\Git Repository\grazing-gradients\data\maldives_master.csv")
load('C:\Users\Jan-Claas\Box Sync\PhD Feedbacks\Git Repository\grazing-gradients\data\maldives_master.csv')
library(readr)
maldives_master <- read_csv("data/maldives_master.csv")
View(maldives_master)
maldives <- maldives_master
str(maldives)
unique(maldives$FG)
unique(maldives$family)
unique(maldives$species)
unique(maldives$habitat)
unique(maldives$management)
unique(maldives$depth)
unique(maldives$abundance.500m2)
hist(maldives$biomass.kgha[maldives$FG=="Herbivore Grazer"],
breaks = 30, main = "Grazers")
hist(maldives$biomass.kgha[maldives$FG=="Herbivore Scraper"],
breaks = 60, main = "Scrapers")
hist(maldives$biomass.kgha[maldives$FG=="Herbivore Browser"],
breaks = 30, main = "Browsers")
dotchart(maldives$biomass.kgha[maldives$FG=="Herbivore Grazer"], main = "Grazers")
dotchart(maldives$biomass.kgha[maldives$FG=="Herbivore Scraper"],main = "Scrapers")
dotchart(maldives$biomass.kgha[maldives$FG=="Herbivore Browser"], main = "Browsers")
par(mfrow = c(2, 3))
hist(maldives$biomass.kgha[maldives$FG=="Herbivore Grazer"],
breaks = 30, main = "Grazers")
hist(maldives$biomass.kgha[maldives$FG=="Herbivore Scraper"],
breaks = 60, main = "Scrapers")
hist(maldives$biomass.kgha[maldives$FG=="Herbivore Browser"],
breaks = 30, main = "Browsers")
dotchart(maldives$biomass.kgha[maldives$FG=="Herbivore Grazer"], main = "Grazers")
dotchart(maldives$biomass.kgha[maldives$FG=="Herbivore Scraper"],main = "Scrapers")
dotchart(maldives$biomass.kgha[maldives$FG=="Herbivore Browser"], main = "Browsers")
hist(maldives$biomass.kgha[maldives$FG=="Herbivore Grazer"],
breaks = 30, main = "Grazers", xlab = FALSE)
xlab = Biomass (kg/ha)
hist(maldives$biomass.kgha[maldives$FG=="Herbivore Grazer"],
breaks = 30, main = "Grazers", xlab = Biomass (kg/ha))
hist(maldives$biomass.kgha[maldives$FG=="Herbivore Grazer"],
breaks = 30, main = "Grazers", xlab = Biomass kg/ha)
hist(maldives$biomass.kgha[maldives$FG=="Herbivore Grazer"],
breaks = 30, main = "Grazers", xlab = Biomass kg per ha)
hist(maldives$biomass.kgha[maldives$FG=="Herbivore Grazer"],
breaks = 30, main = "Grazers", xlab = 'Biomass kg/ha')
hist(maldives$biomass.kgha[maldives$FG=="Herbivore Scraper"],
breaks = 60, main = "Scrapers", xlab = 'Biomass kg/ha')
hist(maldives$biomass.kgha[maldives$FG=="Herbivore Browser"],
breaks = 30, main = "Browsers", xlab = 'Biomass kg/ha')
dotchart(maldives$biomass.kgha[maldives$FG=="Herbivore Grazer"], main = "Grazers")
dotchart(maldives$biomass.kgha[maldives$FG=="Herbivore Scraper"],main = "Scrapers")
dotchart(maldives$biomass.kgha[maldives$FG=="Herbivore Browser"], main = "Browsers")
dotchart(maldives$biomass.kgha[maldives$FG=="Herbivore Grazer"], main = "Grazers",
ylab = "Order of observations", xlab = "Biomass kg/ha")
par(mfrow = c(2, 3))
hist(maldives$biomass.kgha[maldives$FG=="Herbivore Grazer"],
breaks = 30, main = "Grazers", xlab = "Biomass kg/ha")
hist(maldives$biomass.kgha[maldives$FG=="Herbivore Scraper"],
breaks = 60, main = "Scrapers", xlab = "Biomass kg/ha")
hist(maldives$biomass.kgha[maldives$FG=="Herbivore Browser"],
breaks = 30, main = "Browsers", xlab = "Biomass kg/ha")
dotchart(maldives$biomass.kgha[maldives$FG=="Herbivore Grazer"], main = "Grazers",
ylab = "Order of observations", xlab = "Biomass kg/ha")
dotchart(maldives$biomass.kgha[maldives$FG=="Herbivore Scraper"],main = "Scrapers",
ylab = "Order of observations", xlab = "Biomass kg/ha")
dotchart(maldives$biomass.kgha[maldives$FG=="Herbivore Browser"], main = "Browsers",
ylab = "Order of observations", xlab = "Biomass kg/ha")
#identify common species, average number species per transect, biomass, etc.
hist(maldives$species)
#identify common species, average number species per transect, biomass, etc.
hist(maldives$abundance.500m2, col = maldives$species)
#identify common species, average number species per transect, biomass, etc.
barplot(maldives$abundance.500m2, col = maldives$species)
help(histogram)
help("barplot")
#identify common species, average number species per transect, biomass, etc.
barplot(maldives$species)
#identify common species, average number species per transect, biomass, etc.
barplot(x = maldives$species, y = maldives$abundance.500m2)
#identify common species, average number species per transect, biomass, etc.
barplot(x = maldives$species, y = frequency)
unique(maldives$species)
barplot(prop.table(table(maldives$species)))
#identify common species, average number species per transect, biomass, etc.
par(mfrow = c(1,1))
barplot(prop.table(table(maldives$species)))
barplot(prop.table(table(maldives$species), ylab = vertical))
barplot(prop.table(table(maldives$species), las = 0))
barplot(1:10, names=letters[1:10], las=0)
par(mfrow=c(2,2))
barplot(1:10, names=letters[1:10], las=0)
barplot(1:10, names=letters[1:10], las=1)
barplot(1:10, names=letters[1:10], las=2)
barplot(1:10, names=letters[1:10], las=3)
barplot(prop.table(table(maldives$species), las=2))
barplot(prop.table(table(maldives$species)), las = 2)
#identify common species, average number species per transect, biomass, etc.
par(mfrow = c(1,1))
barplot(prop.table(table(maldives$species)), las = 2)
barplot(prop.table(table(maldives$species)), las = 2, cex.names = 0.5)
barplot(prop.table(table(maldives$species)), las = 2, cex.names = 0.5)
barplot(prop.table(table(maldives$species)), las = 2, cex.names = 0.7)
barplot(prop.table(table(maldives$species)), las = 2, cex.names = 0.6)
#identify common species, average number species per transect, biomass, etc.
par(mfrow = c(1,1), mar = c(11,4,4,2))
barplot(prop.table(table(maldives$species)), las = 2, cex.names = 0.6)
#identify common species, average number species per transect, biomass, etc.
par(mfrow = c(1,1), mar = c(5,4,4,2))
barplot(prop.table(table(maldives$species)), las = 2, cex.names = 0.8)
#identify common species, average number species per transect, biomass, etc.
par(mfrow = c(1,1), mar = c(8,4,4,2))
barplot(prop.table(table(maldives$species)), las = 2, cex.names = 0.8)
#identify common species, average number species per transect, biomass, etc.
par(mfrow = c(1,1), mar = c(10))
#identify common species, average number species per transect, biomass, etc.
par(mfrow = c(1,1), mar = c(10, 1, 1, 1))
barplot(prop.table(table(maldives$species)), las = 2, cex.names = 0.8)
#identify common species, average number species per transect, biomass, etc.
par(mfrow = c(1,1), mar = c(10, 4, 4, 2))
barplot(prop.table(table(maldives$species)), las = 2, cex.names = 0.8)
#identify common species, average number species per transect, biomass, etc.
par(mfrow = c(1,1), mar = c(10, 4, 2, 2))
barplot(prop.table(table(maldives$species)), las = 2, cex.names = 0.8)
#identify common species, average number species per transect, biomass, etc.
par(mfrow = c(1,1), mar = c(11, 4, 2, 2))
barplot(prop.table(table(maldives$species)), las = 2, cex.names = 0.8)
#identify common species, average number species per transect, biomass, etc.
par(mfrow = c(1,1), mar = c(11, 4, 2, 2))
barplot(prop.table(table(maldives$species)), las = 2, cex.names = 0.7)
#identify common species, average number species per transect, biomass, etc.
par(mfrow = c(1,1), mar = c(9, 4, 2, 2))
barplot(prop.table(table(maldives$species)), las = 2, cex.names = 0.7)
barplot(prop.table(table(maldives$species)), las = 2, cex.names = 0.7, font = 3)
barplot(prop.table(table(maldives$species)), las = 2, cex.names = 0.7, font = 3, ylab = "n")
barplot(prop.table(table(maldives$species)), las = 2, cex.names = 0.7, font = 3)
#average number species per transect
summary(transect)
#average number species per transect
summary(maldives$transect)
#average number species per transect
count.rows(maldives$transect)
#average number species per transect
nrow(maldives$transect)
transects <- aggregate(transect ~ transect.area + species, data = maldives, count)
transects <- aggregate(transect ~ transect.area + species, data = maldives)
transects <- aggregate(transect ~ transect.area + species, data = maldives,FUN = nrow)
transects
transects <- aggregate(species ~ transect + transect.area, data = maldives,FUN = nrow)
transects
transects <- aggregate(species ~ transect, data = maldives,FUN = nrow)
transects
#average number species per transect
nrow(maldives$transect)
#average number species per transect
unique(maldives$transect)
str(maldives$transect)
#average number species per transect
maldives$transect <- as.factor(maldives$transect)
unique(maldives$transect)
str(maldives$transect)
nrow(maldives$transect)
nrow(nlevels(maldives$transect)
nrow(nlevels(maldives$transect))
barplot(prop.table(table(maldives$transect)))
help(par)
par(1)
barplot(prop.table(table(maldives$transect)))
#common species, average number species per transect
par(mfrow = c(2,1), mar = c(9, 4, 2, 2))
barplot(prop.table(table(maldives$species)), las = 2, cex.names = 0.7, font = 3)
#common species, average number species per transect
par(mfrow = c(2,1), mar = c(9, 4, 2, 2))
barplot(prop.table(table(maldives$species)), las = 2, cex.names = 0.7, font = 3)
#common species, average number species per transect
par(mfrow = c(1,1), mar = c(9, 4, 2, 2))
barplot(prop.table(table(maldives$species)), las = 2, cex.names = 0.7, font = 3)
maldives$transect <- as.factor(maldives$transect)
barplot(prop.table(table(maldives$transect)))
barplot(prop.table(table(maldives$transect)), xlab = Transect)
barplot(prop.table(table(maldives$transect)), xlab = "Transect")
par(mfrow = c(1,1), mar = c(2, 2, 2, 2))
maldives$transect <- as.factor(maldives$transect)
barplot(prop.table(table(maldives$transect)), xlab = "Transect")
par(mfrow = c(1,1), mar = c(2, 4, 2, 2))
maldives$transect <- as.factor(maldives$transect)
barplot(prop.table(table(maldives$transect)), xlab = "Transect")
install.packages("tidyverse")
library(tidyverse); theme_set(theme_bw()); library(gridExtra)
load('data/wio_gbr_herb_master.Rdata')
sey<-herb %>% filter(dataset=='Seychelles')
unique(maldives$FG)
#biomass gradient
hist(maldives$FG)
#biomass gradient
barplot(prop.table(table(maldives$FG)))
aggregate(species ~ FG, maldives, function(x) length(unique(x)))
r length(unique(maldives$species))
{r, echo=F}
#biomass gradient
maldives$logbiomass <- log10(maldives$biomass.kgha)
par(mfrow = c(2, 3))
dotchart(maldives$biomass.kgha[maldives$FG=="Herbivore Grazer"], main = "Grazers",
ylab = "Order of observations", xlab = "Biomass kg/ha")
dotchart(maldives$biomass.kgha[maldives$FG=="Herbivore Scraper"],main = "Scrapers",
ylab = "Order of observations", xlab = "Biomass kg/ha")
dotchart(maldives$biomass.kgha[maldives$FG=="Herbivore Browser"], main = "Browsers",
ylab = "Order of observations", xlab = "Biomass kg/ha")
hist(maldives$logbiomass[maldives$FG=="Herbivore Grazer"],
breaks = 30, main = "Grazers", xlab = "Log Biomass kg/ha")
hist(maldives$logbiomass[maldives$FG=="Herbivore Scraper"],
breaks = 30, main = "Scrapers", xlab = "Log Biomass kg/ha")
hist(maldives$logbiomass[maldives$FG=="Herbivore Browser"],
breaks = 30, main = "Browsers", xlab = "Log Biomass kg/ha")
unique(maldives$site)
#common species, number species per transect
par(mfrow = c(1,1), mar = c(9, 4, 2, 2))
barplot(prop.table(table(maldives$species)), las = 2, cex.names = 0.7, font = 3)
#biomass gradient
maldives$logbiomass <- log10(maldives$biomass.kgha + 1)
par(mfrow = c(2, 3))
dotchart(maldives$biomass.kgha[maldives$FG=="Herbivore Grazer"], main = "Grazers",
ylab = "Order of observations", xlab = "Biomass kg/ha")
dotchart(maldives$biomass.kgha[maldives$FG=="Herbivore Scraper"],main = "Scrapers",
ylab = "Order of observations", xlab = "Biomass kg/ha")
dotchart(maldives$biomass.kgha[maldives$FG=="Herbivore Browser"], main = "Browsers",
ylab = "Order of observations", xlab = "Biomass kg/ha")
hist(maldives$logbiomass[maldives$FG=="Herbivore Grazer"],
breaks = 30, main = "Grazers", xlab = "Log Biomass kg/ha")
hist(maldives$logbiomass[maldives$FG=="Herbivore Scraper"],
breaks = 30, main = "Scrapers", xlab = "Log Biomass kg/ha")
hist(maldives$logbiomass[maldives$FG=="Herbivore Browser"],
breaks = 30, main = "Browsers", xlab = "Log Biomass kg/ha")
#common species, number species per transect & site
par(mfrow = c(1,1), mar = c(9, 4, 2, 2))
barplot(prop.table(table(maldives$species)), las = 2, cex.names = 0.7, font = 3)
par(mfrow = c(1,1), mar = c(2, 4, 2, 2))
maldives$transect <- as.factor(maldives$transect)
barplot(prop.table(table(maldives$transect)), xlab = "Transect")
barplot(prop.table(table(maldives$site)))
table(maldives$site, maldives$transect)
barplot(prop.table(table(maldives$site)), las = 2, cex.names = 0.7, font = 3)
barplot(prop.table(table(maldives$site)), las = 2, cex.names = 0.7)
#common species, number species per transect & site
par(mfrow = c(1,1), mar = c(9, 4, 2, 2))
barplot(prop.table(table(maldives$species)), las = 2, cex.names = 0.7, font = 3)
table(maldives$site, maldives$transect)
barplot(prop.table(table(maldives$site)), las = 2, cex.names = 0.7)
par(mfrow = c(2,1), mar = c(5, 4, 2, 2))
barplot(prop.table(table(maldives$site)), las = 2, cex.names = 0.7)
maldives$transect <- as.factor(maldives$transect)
barplot(prop.table(table(maldives$transect)), xlab = "Transect")
par(mfrow = c(2, 3))
dotchart(maldives$biomass.kgha[maldives$FG=="Herbivore Grazer"], main = "Grazers",
ylab = "Order of observations", xlab = "Biomass kg/ha")
dotchart(maldives$biomass.kgha[maldives$FG=="Herbivore Scraper"],main = "Scrapers",
ylab = "Order of observations", xlab = "Biomass kg/ha")
dotchart(maldives$biomass.kgha[maldives$FG=="Herbivore Browser"], main = "Browsers",
ylab = "Order of observations", xlab = "Biomass kg/ha")
hist(maldives$logbiomass[maldives$FG=="Herbivore Grazer"],
breaks = 30, main = "Grazers", xlab = "Log Biomass kg/ha")
hist(maldives$logbiomass[maldives$FG=="Herbivore Scraper"],
breaks = 30, main = "Scrapers", xlab = "Log Biomass kg/ha")
hist(maldives$logbiomass[maldives$FG=="Herbivore Browser"],
breaks = 30, main = "Browsers", xlab = "Log Biomass kg/ha")
biom <- maldives %>%
group_by(site, date, transect, FG, management) %>%
summarise(biom = sum(biomass.kgha)) %>%
group_by(site, date, FG, management) %>%
summarise(biom = mean (biom))
ggplot(biom, aes(date, log10(biom+1), fill=management)) + geom_boxplot() + facet_wrap(~FG)
biom <- maldives %>%
group_by(site, transect, FG) %>%
summarise(biom = sum(biomass.kgha)) %>%
group_by(site, FG) %>%
summarise(biom = mean (biom))
ggplot(biom, aes(log10(biom+1)) + geom_boxplot() + facet_wrap(~FG)
end
ggplot(biom, aes(log10(biom+1)) + geom_boxplot() + facet_wrap(~FG))
ggplot(biom, aes(log10(biom+1)) + fill=site, geom_boxplot() + facet_wrap(~FG))
ggplot(biom, aes(site, log10(biom+1))) + geom_boxplot() + facet_wrap(~FG)
ggplot(biom, aes(log10(biom+1))) + geom_boxplot() + facet_wrap(~FG)
ggplot(biom, aes(site, log10(biom+1))) + geom_boxplot() + facet_wrap(~FG)
str(maldives)
unique(maldives$FG)
unique(maldives$family)
unique(maldives$species)
unique(maldives$habitat)
unique(maldives$management)
unique(maldives$depth)
unique(maldives$site)
unique(maldives$species)
unique(maldives$family)
unique(maldives$site)
unique(maldives$transect.area)
unique(maldives$abundance.500m2)
aggregate(species ~ FG, maldives, function(x) length(unique(x)))
barplot(prop.table(table(maldives$FG))) #Grazer dominated, then scrapers, few browsers
#biomass gradient
maldives$logbiomass <- log10(maldives$biomass.kgha + 1)
par(mfrow = c(2, 3))
dotchart(maldives$biomass.kgha[maldives$FG=="Herbivore Grazer"], main = "Grazers",
ylab = "Order of observations", xlab = "Biomass kg/ha")
dotchart(maldives$biomass.kgha[maldives$FG=="Herbivore Scraper"],main = "Scrapers",
ylab = "Order of observations", xlab = "Biomass kg/ha")
dotchart(maldives$biomass.kgha[maldives$FG=="Herbivore Browser"], main = "Browsers",
ylab = "Order of observations", xlab = "Biomass kg/ha")
#no outliers
hist(maldives$logbiomass[maldives$FG=="Herbivore Grazer"],
breaks = 30, main = "Grazers", xlab = "Log Biomass kg/ha")
hist(maldives$logbiomass[maldives$FG=="Herbivore Scraper"],
breaks = 30, main = "Scrapers", xlab = "Log Biomass kg/ha")
hist(maldives$logbiomass[maldives$FG=="Herbivore Browser"],
breaks = 30, main = "Browsers", xlab = "Log Biomass kg/ha")
#no outliers
hist(maldives$logbiomass[maldives$FG=="Herbivore Grazer"], main = "Grazers", xlab = "Log Biomass kg/ha")
hist(maldives$logbiomass[maldives$FG=="Herbivore Scraper"], main = "Scrapers", xlab = "Log Biomass kg/ha")
hist(maldives$logbiomass[maldives$FG=="Herbivore Browser"], main = "Browsers", xlab = "Log Biomass kg/ha")
par(mfrow = c(1,1), mar = c(9, 4, 2, 2))
barplot(prop.table(table(maldives$species)), las = 2, cex.names = 0.7, font = 3)
ggplot(maldives, aes(log(mass.g, 2), fill=FG)) + geom_histogram(breaks=c(1:10))
+ facet_wrap(site~FG) + theme(legend.position='none')
ggplot(maldives, aes(log(mass.g, 2), fill=FG)) + geom_histogram(breaks=c(1:10)) + facet_wrap(site~FG) + theme(legend.position='none') + scale_x_continuous(breaks=c(1:10), labels=c(2^c(1:10))) + labs (x='Mass (g)')
ggplot(maldives, aes(log(mass.g, 2), fill=FG)) + geom_histogram(breaks=c(1:10)) + facet_wrap(FG) + theme(legend.position='none') + scale_x_continuous(breaks=c(1:10), labels=c(2^c(1:10))) + labs (x='Mass (g)')
ggplot(maldives, aes(log(mass.g, 2), fill=FG)) + geom_histogram(breaks=c(1:10)) +
facet_wrap(FG) + theme(legend.position='none') + scale_x_continuous(breaks=c(1:10),
labels=c(2^c(1:10))) + labs (x='Mass (g)')
ggplot(maldives, aes(log(mass.g, 2), fill=FG)) + geom_histogram(breaks=c(1:10)) +
facet_wrap(~FG) + theme(legend.position='none') + scale_x_continuous(breaks=c(1:10),
labels=c(2^c(1:10))) + labs (x='Mass (g)')
#common species, number species per transect & site
par(mfrow = c(1,1), mar = c(9, 4, 2, 2))
barplot(prop.table(table(maldives$species)), las = 2, cex.names = 0.7, font = 3)
table(maldives$site, maldives$transect)
par(mfrow = c(2,1), mar = c(5, 4, 2, 2))
barplot(prop.table(table(maldives$site)), las = 2, cex.names = 0.7)
maldives$transect <- as.factor(maldives$transect)
barplot(prop.table(table(maldives$transect)), xlab = "Transect")
barplot(maldives$site, maldives$biomass.kgha)
barplot(maldives$biomass.kgha, maldives$site)
barplot(maldives$biomass.kgha~maldives$site)
barplot(y=maldives$biomass.kgha, x=maldives$site)
plot(biomass.kgha~site, data = maldives)
plot(biomass.kgha, site, data = maldives)
plot(maldives$biomass.kgha, maldives$site)
help(barplot)
hist(maldives$site, maldives$biomass.kgha)
barplot(maldives$site, maldives$biomass.kgha)
boxplot(maldives$site, maldives$biomass.kgha)
boxplot(maldives$biomass.kgha ~ maldives$site)
par(mfrow = c(1,1), mar = c(5, 4, 2, 2))
barplot(prop.table(table(maldives$site)), las = 2, cex.names = 0.7)
boxplot(maldives$biomass.kgha ~ maldives$site)
boxplot(maldives$biomass.kgha ~ maldives$site, las = 2)
boxplot(maldives$biomass.kgha ~ maldives$site, las = 2, cex.names = 0.7)
table(maldives$site, maldives$transect)
par(mfrow = c(1,1), mar = c(5, 4, 2, 2))
barplot(prop.table(table(maldives$site)), las = 2, cex.names = 0.7)
boxplot(maldives$biomass.kgha ~ maldives$site, las = 2, cex.names = 0.7)
boxplot(maldives$biomass.kgha ~ maldives$species, las = 2, cex.names = 0.7)
barplot(prop.table(table(maldives$species)), las = 2, cex.names = 0.7, font = 3)
boxplot(maldives$biomass.kgha ~ maldives$species, las = 2, cex.names = 0.7)
par(mfrow = c(1,1), mar = c(11, 4, 2, 2))
boxplot(maldives$biomass.kgha ~ maldives$species, las = 2, cex.names = 0.7)
boxplot(maldives$biomass.kgha ~ maldives$species, las = 2, cex.names = 0.6)
ggplot(maldives, aes(log(mass.g, 2), fill=FG)) + geom_histogram(breaks=c(1:10)) +
facet_wrap(FG) + theme(legend.position='none') + scale_x_continuous(breaks=c(1:10),
labels=c(2^c(1:10))) + labs (x='Mass (g)')
ggplot(maldives, aes(log(mass.g, 2), fill=FG)) + geom_histogram(breaks=c(1:10)) +
facet_wrap(~FG) + theme(legend.position='none') + scale_x_continuous(breaks=c(1:10),
labels=c(2^c(1:10))) + labs (x='Mass (g)')
aggregate(species ~ FG, maldives, function(x) length(unique(x))) #3 browsers, 13 grazers, 14 scrapers
barplot(prop.table(table(maldives$FG))) #Grazer dominated, then scrapers, few browsers
setwd("~/Box Sync/PhD Feedbacks/Git Repository/grazing-gradients")
load('data/wio_gbr_herb_master.Rdata')
maldives <- herb[herb$dataset == 'Maldives',]
maldives <- herb %>% filter(dataset=='Maldives')
#grab Maldives subset data from 'herb' dataset
load('data/wio_gbr_herb_master.Rdata')
maldives <- herb[herb$dataset == 'Maldives',]
library(readr)
maldives
view(maldives)
print(maldives)
View(maldives)
str(maldives)
unique(maldives$FG) #3 funtional groups
unique(maldives$family) #7 families
unique(maldives$species) #30 species
unique(maldives$habitat) #only 1 level
unique(maldives$management) #only 1 level
unique(maldives$depth) #only 1 level
unique(maldives$site) #11 sites
unique(maldives$transect.area) #250 & 100 m^2
unique(maldives$abundance.500m2) #abundances 2 & 5
aggregate(species ~ FG, maldives, function(x) length(unique(x))) #3 browsers, 13 grazers, 14 scrapers
barplot(prop.table(table(maldives$FG)))
ggplot(maldives, aes(log(mass.g, 2), fill=FG)) + geom_histogram(breaks=c(1:10)) +
facet_wrap(~FG) + theme(legend.position='none') + scale_x_continuous(breaks=c(1:10),
labels=c(2^c(1:10))) + labs (x='Mass (g)')
ggplot(maldives, aes(log(mass.g, 2), fill=FG)) + geom_histogram(breaks=c(1:10)) +
facet_wrap(~FG) + theme(legend.position='none') + scale_x_continuous(breaks=c(1:10),
labels=c(2^c(1:10))) + labs (x='Mass (g)')
#Browsers few but large, grazers smaller but many, scrapers more equally spread in both
library(ggplot2)
ggplot(maldives, aes(log(mass.g, 2), fill=FG)) + geom_histogram(breaks=c(1:10)) +
facet_wrap(~FG) + theme(legend.position='none') + scale_x_continuous(breaks=c(1:10),
labels=c(2^c(1:10))) + labs (x='Mass (g)')
ggplot(maldives, aes(log(mass.g, 2), fill=FG)) + geom_histogram(breaks=c(1:10)) +
facet_wrap(~FG) + theme(legend.position='none') + scale_x_continuous(breaks=c(1:5),
labels=c(2^c(1:5))) + labs (x='Mass (g)')
ggplot(maldives, aes(log(mass.g, 2), fill=FG)) + geom_histogram(breaks=c(1:10)) +
facet_wrap(~FG) + theme(legend.position='none') + scale_x_continuous(breaks=c(1:5),
labels=c(2^c(1:10))) + labs (x='Mass (g)')
ggplot(maldives, aes(log(mass.g, 2), fill=FG)) + geom_histogram(breaks=c(1:10)) +
facet_wrap(~FG) + theme(legend.position='none') + scale_x_continuous(breaks=c(1:10),
labels=c(2^c(1:10))) + labs (x='Mass (g)')
library(tidyverse)
maldives <- herb %>% filter(dataset=='Maldives')
ggplot(biom, aes(site, log10(biom+1))) + geom_boxplot() + facet_wrap(~FG)
biom <- maldives %>%
group_by(site, transect, FG) %>%
summarise(biom = sum(biomass.kgha)) %>%
group_by(site, FG) %>%
summarise(biom = mean (biom))
ggplot(biom, aes(site, log10(biom+1))) + geom_boxplot() + facet_wrap(~FG)
ggplot(sey, aes(log(mass.g, 2), fill=FG)) + geom_histogram(breaks=c(1:10)) + facet_wrap(management~FG) + theme(legend.position='none') + scale_x_continuous(breaks=c(1:10), labels=c(2^c(1:10))) + labs (x='Mass (g)')
sey<-herb %>% filter(dataset=='Seychelles')
ggplot(sey, aes(log(mass.g, 2), fill=FG)) + geom_histogram(breaks=c(1:10)) + facet_wrap(management~FG) + theme(legend.position='none') + scale_x_continuous(breaks=c(1:10), labels=c(2^c(1:10))) + labs (x='Mass (g)')
abund <- sey %>% group_by(unique.id, site, species, FG) %>%
summarise(abund = sum(abundance.500m2)) %>% ## total abundance per UVC
group_by(species, FG) %>%
summarise(abund = mean(abund)) ## mean abundance per site
biom <- sey %>% group_by(unique.id, site, species, FG) %>%
summarise(biom = sum(biomass.kgha)) %>% ## total biomass per UVC
group_by(species, FG) %>%
summarise(biom = mean(biom)) ## mean biomass per site
g2<-ggplot(abund[abund$abund<100,], aes(reorder(species,abund), abund, fill=FG)) +
geom_bar(stat='identity') +
labs(y='Mean abundance per 500m2', x='',title='Seychelles: abundance/biomass distributions') +
coord_flip() + theme(legend.position='none', axis.text.y=element_text(size=6))
g3<-ggplot(biom[biom$biom<300,], aes(reorder(species,biom), biom, fill=FG)) +
geom_bar(stat='identity') +
labs(y='Mean biomass kg ha-1', x='') +
coord_flip() + theme(legend.position=c(0.75, 0.25), axis.text.y=element_text(size=6))
grid.arrange(g2, g3)
library(gridExtra)
grid.arrange(g2, g3)
abund.mal <- maldives %>% group_by(unique.id, site, species, FG) %>%
summarise(abund.mal = sum(abundance.500m2)) %>%
group_by(species, FG) %>%
summarise(abund.mal = mean(abund.mal))
biom.mal <- maldives %>% group_by(unique.id, site, species, FG) %>%
summarise(biom.mal = sum(biomass.kgha)) %>%
group_by(species, FG) %>%
summarise(biom.mal = mean(biom.mal))
g2<-ggplot(abund.mal[abund.mal$abund.mal<100,], aes(reorder(species,abund.mal), abund.mal, fill=FG)) +
geom_bar(stat='identity') +
labs(y='Mean abundance per 500m2', x='',title='Maldives: abundance/biomass distributions') +
coord_flip() + theme(legend.position='none', axis.text.y=element_text(size=6))
#cheeky James script steal - good deal
abund.mal <- maldives %>% group_by(unique.id, site, species, FG) %>%
summarise(abund.mal = sum(abundance.500m2)) %>%
group_by(species, FG) %>%
summarise(abund.mal = mean(abund.mal))
#good deal 2
biom.mal <- maldives %>% group_by(unique.id, site, species, FG) %>%
summarise(biom.mal = sum(biomass.kgha)) %>%
group_by(species, FG) %>%
summarise(biom.mal = mean(biom.mal))
gooddeal1<-ggplot(abund.mal[abund.mal$abund.mal<100,], aes(reorder(species,abund.mal), abund.mal, fill=FG)) +
geom_bar(stat='identity') +
labs(y='Mean abundance per 500m2', x='',title='Maldives: abundance/biomass distributions') +
coord_flip() + theme(legend.position='none', axis.text.y=element_text(size=6))
gooddeal2<-ggplot(biom.mal[biom.mal$biom.mal<300,], aes(reorder(species,biom.mal), biom.mal, fill=FG)) +
geom_bar(stat='identity') +
labs(y='Mean biomass kg ha-1', x='') +
coord_flip() + theme(legend.position=c(0.75, 0.25), axis.text.y=element_text(size=6))
grid.arrange(gooddeal1, gooddeal2)
ggplot(maldives, aes(log(mass.g, 2), fill=FG)) + geom_histogram(breaks=c(1:10)) +
facet_wrap(~FG) + theme(legend.position='none') + scale_x_continuous(breaks=c(1:10),
labels=c(2^c(1:10))) + labs (x='Mass (g)')
