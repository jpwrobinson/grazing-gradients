setwd(C:/Users/jenee/Documents/git_repos/grazing-gradients/data)
setwd("C:/Users/jenee/Documents/git_repos/grazing-gradients/data")
load("data/wio_gbr_herb_master.Rdata")
setwd("C:/Users/jenee/Documents/git_repos/grazing-gradients")
load("data/wio_gbr_herb_master.Rdata")
str(herb) ## check structure of data frame
unique(herb$dataset) ## check regions in herb
chagos <- herb[herb$dataset == 'Chagos',]
write.csv(chagos, file = 'data/chagos_master.csv')
View(chagos)
install.packages("ggplot2")
library(ggplot2)
levels(chagos$FG)
chagos$FG
str(herb) ## check structure of data frame
chagos$FG <- as.factor(chagos$FG)
levels(chagos$FG)
ggplot(chagos,aes(x=chagos$biomass.kgha)) +
geom_histogram(data=subset(chagos,chagos$FG == 'Herbivore Grazer'),fill = "red", alpha = 0.2) +
geom_histogram(data=subset(chagos,chagos$FG == 'Herbivore Browzer'),fill = "blue", alpha = 0.2) +
geom_histogram(data=subset(chagos,chagos$FG == 'Herbivore Scraper'),fill = "green", alpha = 0.2)
ggplot(aes(x=chagos$biomass.kgha)) +
geom_histogram(data=subset(chagos$FG == 'Herbivore Grazer'),fill = "red", alpha = 0.2) +
geom_histogram(data=subset(chagos$FG == 'Herbivore Browzer'),fill = "blue", alpha = 0.2) +
geom_histogram(data=subset(chagos$FG == 'Herbivore Scraper'),fill = "green", alpha = 0.2)
ggplot(chagos,aes(x=biomass.kgha)) +
geom_histogram(data=subset(chagos,FG == 'Herbivore Grazer'),fill = "red", alpha = 0.2) +
geom_histogram(data=subset(chagos,FG == 'Herbivore Browzer'),fill = "blue", alpha = 0.2) +
geom_histogram(data=subset(chagos,FG == 'Herbivore Scraper'),fill = "green", alpha = 0.2)
ggplot(chagos, aes(x=biomass.kgha, fill=GF)) + geom_density(alpha=.3)
ggplot(chagos, aes(x=biomass.kgha, fill=FG)) + geom_density(alpha=.3)
ggplot(chagos, aes(x=biomass.kgha, fill=FG)) + geom_density(alpha=.1)
ggplot(chagos, aes(x=biomass.kgha, fill=FG)) + geom_density(alpha=.3)
ggplot(chagos, aes(x=biomass.kgha, fill=FG)) + geom_density(alpha=.3, yScale="log10")
ggplot2.density(data=chagos, xName='biomass.kgha', groupName='FG',
showLegend=TRUE,yScale=log10)
install.packages("devtools")
library(devtools)
install_github("easyGgplot2", "kassambara")
ggplot2.density(data=chagos, xName='biomass.kgha', groupName='FG',
showLegend=TRUE,yScale=log10)
install_github("easyGgplot2", "kassambara/easyGgplot2")
install_github("easyGgplot2", "kassambara/easyGgplot2/easyGgplot2")
library(easyGgplot2)
ggplot2.density(data=chagos, xName='biomass.kgha', groupName='FG',
showLegend=TRUE,yScale=log10)
ggplot2.density(data=chagos, xName='biomass.kgha', groupName='FG',
showLegend=TRUE)
chagos$logbiomass <- log10(chagos$biomass.kgha)
ggplot(chagos, aes(x=logbiomass, fill=FG)) + geom_density(alpha=.3)
setwd("C:/Users/jenee/Documents/git_repos/grazing-gradients")
load("data/wio_gbr_herb_master.Rdata")
str(herb) ## check structure of data frame
unique(herb$dataset) ## check regions in herb
chagos <- herb[herb$dataset == 'Chagos',]
write.csv(chagos, file = 'data/chagos_master.csv')
install.packages("ggplot2")
library(ggplot2)
chagos$FG <- as.factor(chagos$FG)
levels(chagos$FG)
#log scale biomass gradient
chagos$logbiomass <- log10(chagos$biomass.kgha)
ggplot(chagos, aes(x=logbiomass, fill=FG)) + geom_density(alpha=.3)
View(chagos)
str(herb) ## check structure of data frame
unique(herb$dataset) ## check regions in herb
## subset to maldives data only
maldives <- herb[herb$dataset == 'Maldives',]
## write to csv
write.csv(maldives, file = 'data/maldives_master.csv')
str(maldives)
unique(maldives$FG)
unique(maldives$family)
unique(maldives$species)
unique(maldives$habitat)
unique(maldives$management)
hist(maldives$biomass.kgha[maldives$FG=="Herbivore Grazer"], breaks = 30, main = "Grazers")
hist(maldives$biomass.kgha[maldives$FG=="Herbivore Scraper"], breaks = 60, main = "Scrapers")
hist(maldives$biomass.kgha[maldives$FG=="Herbivore Browser"], breaks = 30, main = "Browsers")
hist(log2(maldives$biomass.kgha[maldives$FG=="Herbivore Grazer"]), main = "Grazers", axes =F)
axis(1, at=c(-1:5), labels=2^(c(-1:5))); axis(2)
hist(log2(maldives$biomass.kgha[maldives$FG=="Herbivore Scraper"]), main = "Scrapers", axes = F)
axis(1, at=c(-1:300), labels=2^(c(-1:300))); axis(2)
hist(log2(maldives$biomass.kgha[maldives$FG=="Herbivore Browser"]), main = "Browsers", axes = F)
axis(1, at=c(-1:30), labels=2^(c(-1:30))); axis(2)
ggplot(chagos, aes(x=logbiomass, fill=FG)) + geom_density(alpha=.3)
setwd("C:/Users/jenee/Documents/git_repos/grazing-gradients")
load("data/wio_gbr_herb_master.Rdata")
str(herb) ## check structure of data frame
unique(herb$dataset) ## check regions in herb
chagos <- herb[herb$dataset == 'Chagos',]
write.csv(chagos, file = 'data/chagos_master.csv')
install.packages("ggplot2")
library(ggplot2)
chagos$FG <- as.factor(chagos$FG)
levels(chagos$FG)
#log scale biomass gradient
chagos$logbiomass <- log10(chagos$biomass.kgha)
ggplot(chagos, aes(x=logbiomass, fill=FG)) + geom_density(alpha=.3)
# count number of unique species per functional group
aggregate(species ~ FG, sey, function(x) length(unique(x)))
# data loads and working directory stuff
setwd('/Users/robins64/Documents/git_repos/grazing-gradients')
# data loads and working directory stuff
setwd('/Users/jenee/Documents/git_repos/grazing-gradients')
# Jan, Jeneen, Sam: add your working directories here
load('data/wio_gbr_herb_master.Rdata')
sey<-herb %>% filter(dataset=='Seychelles')
install.packages("tidyverse")
library(tidyverse)
load("~/Documents/git_repos/grazing-gradients/data/wio_gbr_herb_master.Rdata")
setwd('/Users/jenee/Documents/git_repos/grazing-gradients')
ggplot(chagos, aes(fill=habitat, y=biomass.kgha, x=FG)) +
geom_bar(position="dodge", stat="identity")
library(ggplot2)
#Comparing sheltered and unsheltered functional groups
#Grouped bar chart
ggplot(chagos, aes(fill=habitat, y=biomass.kgha, x=FG)) +
geom_bar(position="dodge", stat="identity")
#Comparing sheltered and unsheltered functional groups
#Grouped bar chart showing biomass of each FG at different habitats
ggplot(chagos, aes(fill=FG, y=biomass.kgha, x=habitat)) +
geom_bar(position="dodge", stat="identity")
#Comaparing depth
ggplot(chagos, aes(fill=FG, y=biomass.kgha, x=depth)) +
geom_bar(position="dodge", stat="identity")
#Comaparing depth
ggplot(data=chagos, aes(x=depth, y=biomass.kgha, group=FG)) +
geom_line()+
geom_point()
ggplot(chagos, aes(fill=depth, y=biomass.kgha, x=FG)) +
geom_bar(position="dodge", stat="identity")
ggplot(chagos, aes(fill=FG, y=biomass.kgha, x=depth)) +
geom_bar(position="dodge", stat="identity")
structure(chagos)
str(chagos)
chagos$depth <- as.character(chagos$depth)
ggplot(chagos, aes(fill=FG, y=biomass.kgha, x=depth)) +
geom_bar(position="dodge", stat="identity")
#Get some descriptive info on survey data
#Number of sites
levels(chagos$site)
#Get some descriptive info on survey data
#Number of sites
chagos$site <- as.factor(chagos$site)
levels(chagos$site)
#Number of reefs
chagos$reef <- as.factor(chagos$reef)
#Number of transects per site
chagos$transect <- as.factor(chagos$transect)
#Number of transects per site
chagos$transect <- as.numeric(chagos$transect)#4 transects
data.table(chagos)
#Get some descriptive info on survey data
install.packages("data.table")
library(data.table)
data.table(chagos)
summary(chagos)
#Number of transects per site
chagos$transect <- as.factor(chagos$transect)#4 transects
#Get some descriptive info on survey data
summary(chagos) #5729 records
#Load packages
library(tidyverse)
chagos %>% count(site)
chagos %>% count(site, transect, sort =TRUE)
#Number of species
chagos %>% count(species)
#Number of sitings of each species
chagos$species <- as.factor(chagos$species)
#From James
# count number of unique species per functional group
aggregate(species ~ FG, chagos, function(x) length(unique(x)))
## estimate mean biomass at site level, by species
biom <- chagos %>% group_by(unique.id, site, species, FG) %>%
summarise(biom = sum(biomass.kgha)) %>% ## total biomass per UVC
group_by(species, FG) %>%
summarise(biom = mean(biom)) ## mean biomass per site
g2<-ggplot(abund[abund$abund<100,], aes(reorder(species,abund), abund, fill=FG)) +
geom_bar(stat='identity') +
labs(y='Mean abundance per 500m2', x='',title='Chagos: abundance/biomass distributions') +
coord_flip() + theme(legend.position='none', axis.text.y=element_text(size=6))
## estimate mean abundance at site level, by species
abund <- chagos %>% group_by(unique.id, site, species, FG) %>%
summarise(abund = sum(abundance.500m2)) %>% ## total abundance per UVC
group_by(species, FG) %>%
summarise(abund = mean(abund)) ## mean abundance per site
g2<-ggplot(abund[abund$abund<100,], aes(reorder(species,abund), abund, fill=FG)) +
geom_bar(stat='identity') +
labs(y='Mean abundance per 500m2', x='',title='Chagos: abundance/biomass distributions') +
coord_flip() + theme(legend.position='none', axis.text.y=element_text(size=6))
g3<-ggplot(biom[biom$biom<300,], aes(reorder(species,biom), biom, fill=FG)) +
geom_bar(stat='identity') +
labs(y='Mean biomass kg ha-1', x='') +
coord_flip() + theme(legend.position=c(0.75, 0.25), axis.text.y=element_text(size=6))
g2
grid.arrange(g2, g3)
install.packages("grid")
install.packages("grid")
install.packages("grid")
library(grid)
grid.arrange(g2, g3)
library(gtable)
grid.arrange(g2, g3)
library(gridExtra)
install.packages("gridExtra")
library(gridExtra)
grid.arrange(g2, g3)
#log scale biomass gradient
chagos$logbiomass <- log10(chagos$biomass.kgha)
ggplot(chagos, aes(x=logbiomass, fill=FG)) + geom_density(alpha=.3)
#Load packages
library(tidyverse)
#Load packages
library(tidyverse)
library (ggplot2)
library (ggplot2)
#Load packages
library(tidyverse)
ggplot(chagos, aes(x=logbiomass, fill=FG)) + geom_density(alpha=.3)
#Comparing sheltered and unsheltered functional groups
#Grouped bar chart showing biomass of each FG at different habitats, blank is unrecorded habitat type
ggplot(chagos, aes(fill=FG, y=biomass.kgha, x=habitat)) +
geom_bar(position="dodge", stat="identity")
#Plot biomass of each FG at 3 and 9 m
ggplot(chagos, aes(fill=FG, y=biomass.kgha, x=depth)) +
geom_bar(position="dodge", stat="identity")
#Plot biomass of each FG at 3 and 9 m
ggplot(chagos, aes(fill=FG, y=biomass.kgha, x=depth)) +
geom_bar(position="dodge", stat="identity")
#Comparing sheltered and unsheltered functional groups
#Grouped bar chart showing biomass of each FG at different habitats, blank is unrecorded habitat type
ggplot(chagos, aes(fill=FG, y=biomass.kgha, x=habitat)) +
geom_bar(position="dodge", stat="identity")
#Comparing sheltered and unsheltered functional groups
#Grouped bar chart showing biomass of each FG at different habitats, blank is unrecorded habitat type
ggplot(chagos, aes(fill=FG, y=biomass.kgha, x=habitat)) +
geom_bar(position="dodge", stat="identity")
#Plot biomass of each FG at 3 and 9 m
ggplot(chagos, aes(fill=FG, y=biomass.kgha, x=depth)) +
geom_bar(position="dodge", stat="identity")
#Get some descriptive info on survey data
summary(chagos) #5729 records
levels(chagos$site) #20 sites
#Number of reefs
chagos$reef <- as.factor(chagos$reef) #4 reefs
#Number of transects per site
chagos$transect <- as.factor(chagos$transect) #1-4 transects
chagos %>% count(site, transect, sort =TRUE)
#Number of sitings of each species
chagos$species <- as.factor(chagos$species)
chagos %>% count(species) # 52 species
#From James script
# count number of unique species per functional group
aggregate(species ~ FG, chagos, function(x) length(unique(x)))
#From James script
## estimate size distribution by functional groups
ggplot(sey, aes(log(mass.g, 2), fill=FG)) + geom_histogram(breaks=c(1:10)) + facet_wrap(management~FG) + theme(legend.position='none') + scale_x_continuous(breaks=c(1:10), labels=c(2^c(1:10))) + labs (x='Mass (g)')
#From James script
## estimate size distribution by functional groups
ggplot(chagos, aes(log(mass.g, 2), fill=FG)) + geom_histogram(breaks=c(1:10)) + facet_wrap(management~FG) + theme(legend.position='none') + scale_x_continuous(breaks=c(1:10), labels=c(2^c(1:10))) + labs (x='Mass (g)')
# load tidy packages and set ggplot theme
library(tidyverse); theme_set(theme_bw()); library(gridExtra)
# data loads
load('data/wio_gbr_herb_master.Rdata')
sey<-herb %>% filter(dataset=='Seychelles')
install.packages("tinytex")
